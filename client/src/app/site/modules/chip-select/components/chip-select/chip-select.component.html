@if (chips.length) {
    <mat-chip-listbox class="mat-chip-list-stacked" [matMenuTriggerFor]="canOpen ? menu : null">
        @for (chip of chips; track chip) {
            <mat-basic-chip
                class="chip-stacked"
                disableRipple
                [class]="chipClass || 'grey'"
                [ngClass]="{ 'menu-handle': canOpen }"
            >
                <ng-content *ngTemplateOutlet="chip.template"></ng-content>
            </mat-basic-chip>
        }
    </mat-chip-listbox>
} @else {
    <mat-basic-chip
        disableRipple
        [class]="chipClass || 'grey'"
        [matMenuTriggerFor]="canOpen ? menu : null"
        [ngClass]="{ 'menu-handle': canOpen }"
    >
        <ng-content></ng-content>
    </mat-basic-chip>
}

<mat-menu #menu="matMenu">
    <ng-content select="[menu]"></ng-content>
</mat-menu>
