<ng-container *ngIf="chips.length">
    <mat-chip-listbox class="mat-chip-list-stacked" [matMenuTriggerFor]="canOpen ? menu : null">
        <mat-basic-chip
            class="chip-stacked"
            *ngFor="let chip of chips"
            [ngClass]="{ 'menu-handle': canOpen }"
            [class]="chipClass || 'grey'"
            disableRipple
        >
            <ng-content *ngTemplateOutlet="chip.template"></ng-content>
        </mat-basic-chip>
    </mat-chip-listbox>
</ng-container>
<ng-container *ngIf="chips.length < 1">
    <mat-basic-chip
        disableRipple
        [matMenuTriggerFor]="canOpen ? menu : null"
        [class]="chipClass || 'grey'"
        [ngClass]="{ 'menu-handle': canOpen }"
    >
        <ng-content></ng-content>
    </mat-basic-chip>
</ng-container>

<mat-menu #menu="matMenu">
    <ng-content select="[menu]"></ng-content>
</mat-menu>
