<div>
    <mat-form-field class="search-field" appearance="outline" floatLabel="never">
        <input
            matInput
            [(ngModel)]="searchTerm"
            (change)="searchChange()"
            placeholder="{{ 'Search' | translate }}"
            autofocus>
        <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <section class="filter-section" [formGroup]="currentFilters">
        <ul class="filters-list">
            <li *ngFor="let filter of availableFilters | keyvalue">
                <mat-checkbox formControlName="{{ filter.key }}">{{ filter.value }}</mat-checkbox>
            </li>
        </ul>
    </section>
</div>

<mat-dialog-content class="search-results">
    <section *ngFor="let category of results | keyvalue" class="search-results-category">
        <h2>
            <span
                [matBadge]="category.value.length < 100 ? category.value.length : '99+'"
                [matBadgeOverlap]="false">{{ availableFilters[category.key] | translate }}</span>
        </h2>
        <div 
            *ngFor="let result of category.value; let index = index"
            class="search-results-entry-container"
            [ngClass]="{'background-dark': 0 !== index % 2 && (isDarkModeObservable | async), 'background-dark-brighter': 0 === index % 2 && (isDarkModeObservable | async)}"
            >
            <a
                *ngIf="result.fqid.startsWith('mediafile')"
                class="search-results-entry"
                [href]="result.url"
                target="blank"
                mat-dialog-close>
                <h3 *ngIf="result.title">{{ result.title }}</h3>
            </a>
            <router-link
                *ngIf="!result.fqid.startsWith('mediafile')"
                class="search-results-entry"
                [routerLink]="result.url"
                mat-dialog-close>
                <h3 *ngIf="result.title">{{ result.title }}</h3>
                <p *ngIf="result.text" [innerHtml]="result.text"></p>
            </router-link>
        </div>
    </section>
</mat-dialog-content>
