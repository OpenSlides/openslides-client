<mat-card class="os-card">
    <mat-card-content>
        @if (!canUpdate && !isOwnPage) {
            <div>
                <!-- no Admin, cannot Manage (a.k.a Attack Prevention) -->
                <span>{{ 'You are not supposed to be here...' | translate }}</span>
            </div>
        }
        @if (canUpdate && !isOwnPage) {
            <div>
                <!-- can update, but not own Page (a.k.a. Admin) -->
                @if (user) {
                    <div>
                        <h1>
                            <span>{{ 'Change password for' | translate }}</span>
                            {{ user.full_name }}
                        </h1>
                        <os-icon-container icon="warning" size="large">
                            <span>{{ 'You override the personally set password!' | translate }}</span>
                        </os-icon-container>
                    </div>
                }
                <br />
                <form [formGroup]="adminPasswordForm" (keydown)="onKeyDown($event)">
                    <mat-form-field>
                        <mat-label>{{ 'New password' | translate }}</mat-label>
                        <input
                            [type]="hidePassword ? 'password' : 'text'"
                            matInput
                            formControlName="newPassword"
                            required
                        />
                        <mat-icon
                            class="pointer"
                            matSuffix
                            mat-icon-button
                            matTooltip="{{
                                hidePassword ? ('Show password' | translate) : ('Hide password' | translate)
                            }}"
                            (click)="hidePassword = !hidePassword"
                        >
                            {{ hidePassword ? 'visibility' : 'visibility_off' }}
                        </mat-icon>
                        <mat-icon
                            class="pointer spacer-left-10"
                            matSuffix
                            mat-icon-button
                            matTooltip="{{ 'Generate password' | translate }}"
                            (click)="generatePassword()"
                        >
                            autorenew
                        </mat-icon>
                    </mat-form-field>
                </form>
                <br />
                @if (user) {
                    <div>
                        <span>{{ 'Initial password' | translate }}</span>
                        : {{ user.default_password }}
                        <br />
                        <span>{{ 'Username' | translate }}</span>
                        : {{ user.username }}
                    </div>
                }
            </div>
        }
        @if (isOwnPage) {
            <div (keydown)="onKeyDown($event)">
                <!-- can not Manage, but own Page (a.k.a. User) -->
                <os-password-form
                    (validEvent)="isUserPasswordValid = $event"
                    (changeEvent)="userPasswordForm = $event"
                ></os-password-form>
            </div>
        }
    </mat-card-content>
</mat-card>
