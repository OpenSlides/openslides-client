<form [formGroup]="changePasswordForm">
    <mat-form-field>
        <mat-label>{{ 'Old password' | translate }}</mat-label>
        <input
            #oldPassword
            formControlName="oldPassword"
            matInput
            required
            [type]="hideOldPassword ? 'password' : 'text'"
        />
        <button
            mat-icon-button
            matSuffix
            tabindex="-1"
            type="button"
            [disabled]="!oldPassword.value"
            (click)="hideOldPassword = !hideOldPassword"
        >
            <mat-icon>{{ hideOldPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
    </mat-form-field>
    <mat-form-field>
        <mat-label>{{ 'New password' | translate }}</mat-label>
        <input
            #newPassword
            formControlName="newPassword"
            matInput
            required
            [type]="hideNewPassword ? 'password' : 'text'"
        />
        <button
            mat-icon-button
            matSuffix
            tabindex="-1"
            type="button"
            [disabled]="!newPassword.value"
            (click)="hideNewPassword = !hideNewPassword"
        >
            <mat-icon>{{ hideNewPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
    </mat-form-field>
    <mat-form-field>
        <mat-label>{{ 'Confirm new password' | translate }}</mat-label>
        <input
            #confirmPassword
            formControlName="confirmPassword"
            matInput
            required
            [type]="hideConfirmPassword ? 'password' : 'text'"
        />
        <button
            mat-icon-button
            matSuffix
            tabindex="-1"
            type="button"
            [disabled]="!confirmPassword.value"
            (click)="hideConfirmPassword = !hideConfirmPassword"
        >
            <mat-icon>{{ hideConfirmPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
        @if (changePasswordForm.get('confirmPassword')?.hasError('passwordMismatch')) {
            <mat-error>
                {{ 'Passwords do not match' | translate }}
            </mat-error>
        }
    </mat-form-field>

    <div class="logout-hint" translate>
        You will be logged out when you change your password. You must then log in with the new password.
    </div>
</form>
