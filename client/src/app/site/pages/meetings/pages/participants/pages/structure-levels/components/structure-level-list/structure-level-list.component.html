<os-head-bar [hasMainButton]="canEdit" [nav]="false" (mainEvent)="onPlusButton()" [multiSelectMode]="false">
    <!-- Title -->
    <div class="title-slot">
        <h2>{{ 'Structure Levels' | translate }}</h2>
    </div>
</os-head-bar>

<os-list
    [listObservable]="repo.getViewModelListObservable()"
    [(selectedRows)]="selectedRows"
    listStorageKey="structure_levels"
    [vScrollFixed]="60"
    [filterProps]="['name']"
    [hiddenInMobile]="['info', 'menu']"
>
    <div *osScrollingTableCell="'name'; row as structure_level" class="cell-slot fill">
        <div>
            {{ structure_level.name }}
        </div>
    </div>
</os-list>

<!-- Template for new structure level dialog -->
<ng-template #newStructureLevelDialog>
    <h1 mat-dialog-title>
        <span>{{ 'New structure level' | translate }}</span>
    </h1>
    <div class="os-form-card-mobile" mat-dialog-content>
        <form [formGroup]="createForm" (keydown)="onKeyDown($event)">
            <!-- Name -->
            <p>
                <mat-form-field>
                    <input
                        formControlName="name"
                        matInput
                        placeholder="{{ 'Name of the new structure level' | translate }}"
                        required
                    />
                    <mat-error>
                        {{ 'A name is required' | translate }}
                    </mat-error>
                </mat-form-field>
            </p>

            <!-- Color -->
            <p>
                <mat-form-field>
                    <mat-label>{{ 'Color' | translate }}</mat-label>
                    <input formControlName="color" type="color" matInput />
                    <mat-error>
                        {{ 'A color is required' | translate }}
                    </mat-error>
                </mat-form-field>
            </p>

            <!-- Allow Additional Time -->
            <p>
                <mat-checkbox formControlName="allow_additional_time">
                    {{ 'Allow additional time' | translate }}
                </mat-checkbox>
            </p>
        </form>
    </div>
    <div mat-dialog-actions>
        <button mat-button [disabled]="!createForm.valid" [mat-dialog-close]="true">
            <span>{{ 'Save' | translate }}</span>
        </button>
        <button mat-button [mat-dialog-close]="false">
            <span>{{ 'Cancel' | translate }}</span>
        </button>
    </div>
</ng-template>
