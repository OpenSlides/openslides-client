<div class="editor">
    <div *ngIf="editorReady" class="editor-menu">
        <div class="button-group">
            <button
                mat-ripple
                type="button"
                class="text"
                [ngClass]="{ active: isGodButtonActive }"
                (click)="godButtonAction()"
            >
                {{ godButtonText }}
            </button>

            <button type="button" class="more" mat-ripple [matMenuTriggerFor]="formatMenu">
                <mat-icon>arrow_drop_down</mat-icon>
            </button>
        </div>

        <mat-menu #formatMenu="matMenu">
            <button mat-menu-item [matMenuTriggerFor]="headingMenu" translate>Headings</button>
            <button mat-menu-item [matMenuTriggerFor]="textAlignMenu" translate>Align</button>
            <button mat-menu-item [matMenuTriggerFor]="inlineMenu" translate>Inline</button>
        </mat-menu>

        <mat-menu #headingMenu="matMenu">
            <button
                *ngFor="let level of headingLevels"
                type="button"
                mat-menu-item
                [ngClass]="{ active: editor.isActive('heading', { level }) }"
                (click)="editor.chain().focus().toggleHeading({ level }).run()"
            >
                <mat-icon *ngIf="editor.isActive('heading')">
                    {{ editor.isActive('heading', { level }) ? 'done' : '' }}
                </mat-icon>
                {{ 'Heading' | translate }} {{ level }}
            </button>
        </mat-menu>

        <mat-menu #textAlignMenu="matMenu">
            <button
                type="button"
                mat-menu-item
                [disabled]="editor.isActive({ textAlign: 'left' })"
                [ngClass]="{ active: editor.isActive({ textAlign: 'left' }) }"
                (click)="editor.chain().focus().setTextAlign('left').run()"
            >
                <mat-icon>format_align_left</mat-icon>
                {{ 'Left' | translate }}
            </button>
            <button
                type="button"
                mat-menu-item
                [disabled]="editor.isActive({ textAlign: 'center' })"
                [ngClass]="{ active: editor.isActive({ textAlign: 'center' }) }"
                (click)="editor.chain().focus().setTextAlign('center').run()"
            >
                <mat-icon>format_align_center</mat-icon>
                {{ 'Center' | translate }}
            </button>
            <button
                type="button"
                mat-menu-item
                [disabled]="editor.isActive({ textAlign: 'right' })"
                [ngClass]="{ active: editor.isActive({ textAlign: 'right' }) }"
                (click)="editor.chain().focus().setTextAlign('right').run()"
            >
                <mat-icon>format_align_right</mat-icon>
                {{ 'Right' | translate }}
            </button>
            <button
                type="button"
                mat-menu-item
                [disabled]="editor.isActive({ textAlign: 'justify' })"
                [ngClass]="{ active: editor.isActive({ textAlign: 'justify' }) }"
                (click)="editor.chain().focus().setTextAlign('justify').run()"
            >
                <mat-icon>format_align_justify</mat-icon>
                {{ 'Justify' | translate }}
            </button>
        </mat-menu>

        <mat-menu #inlineMenu="matMenu">
            <button
                type="button"
                mat-menu-item
                [ngClass]="{ active: editor.isActive('subscript') }"
                (click)="editor.chain().focus().toggleSubscript().run()"
            >
                <mat-icon>subscript</mat-icon>
                {{ 'Subscript' | translate }}
            </button>

            <button
                type="button"
                mat-menu-item
                [ngClass]="{ active: editor.isActive('superscript') }"
                (click)="editor.chain().focus().toggleSuperscript().run()"
            >
                <mat-icon>superscript</mat-icon>
                {{ 'Superscript' | translate }}
            </button>
        </mat-menu>

        <button
            mat-ripple
            type="button"
            [matTooltip]="'Blockquote' | translate"
            matTooltipPosition="above"
            [ngClass]="{ active: editor.isActive('blockquote') }"
            (click)="editor.chain().focus().toggleBlockquote().run()"
        >
            <mat-icon>format_quote</mat-icon>
        </button>

        <div class="button-group">
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Bullet list' | translate"
                matTooltipPosition="above"
                [ngClass]="{ active: editor.isActive('bulletList') }"
                (click)="editor.chain().focus().toggleBulletList().run()"
            >
                <mat-icon>format_list_bulleted</mat-icon>
            </button>
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Numbered list' | translate"
                matTooltipPosition="above"
                [ngClass]="{ active: editor.isActive('orderedList') }"
                (click)="editor.chain().focus().toggleOrderedList().run()"
            >
                <mat-icon>format_list_numbered</mat-icon>
            </button>
        </div>

        <div class="button-group">
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Bold' | translate"
                [ngClass]="{ active: editor.isActive('bold') }"
                (click)="editor.chain().focus().toggleBold().run()"
            >
                <mat-icon>format_bold</mat-icon>
            </button>
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Italic' | translate"
                [ngClass]="{ active: editor.isActive('italic') }"
                (click)="editor.chain().focus().toggleItalic().run()"
            >
                <mat-icon>format_italic</mat-icon>
            </button>
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Underline' | translate"
                [ngClass]="{ active: editor.isActive('underline') }"
                (click)="editor.chain().focus().toggleUnderline().run()"
            >
                <mat-icon>format_underline</mat-icon>
            </button>
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Strikethrough' | translate"
                [ngClass]="{ active: editor.isActive('strike') }"
                (click)="editor.chain().focus().toggleStrike().run()"
            >
                <mat-icon>format_strikethrough</mat-icon>
            </button>
        </div>

        <button
            mat-ripple
            type="button"
            [matTooltip]="'Text color' | translate"
            class="color-selection"
            [ngStyle]="{ color: editor.getAttributes('textStyle')['color'] }"
        >
            <mat-icon>format_color_text</mat-icon>
            <input
                [value]="editor.getAttributes('textStyle')['color']"
                (change)="updateFontColor($event)"
                type="color"
                list="text-colors"
            />
        </button>
        <div class="button-group">
            <button
                mat-ripple
                type="button"
                [matTooltip]="'Background color' | translate"
                [ngClass]="{ active: editor.isActive('highlight') }"
                (click)="editor.chain().focus().toggleHighlight().run()"
            >
                <mat-icon>format_color_fill</mat-icon>
            </button>
            <button type="button" mat-ripple class="more color-selection">
                <mat-icon>arrow_drop_down</mat-icon>
                <input
                    [value]="editor.getAttributes('highlight')['color']"
                    (change)="updateHighlightColor($event)"
                    type="color"
                    list="background-colors"
                />
            </button>
        </div>
        <button type="button" mat-ripple [matTooltip]="'Clear formatting' | translate" (click)="clearSelectedFormat()">
            <mat-icon>format_clear</mat-icon>
        </button>

        <button
            mat-ripple
            type="button"
            [matTooltip]="'Insert/edit link' | translate"
            [ngClass]="{ active: editor.isActive('link') }"
            (click)="setLinkDialog()"
        >
            <mat-icon>link</mat-icon>
        </button>

        <button
            mat-ripple
            type="button"
            [matTooltip]="'Insert/edit image' | translate"
            [ngClass]="{ active: editor.isActive('image') }"
            (click)="setImageDialog()"
        >
            <mat-icon>image</mat-icon>
        </button>

        <button
            *ngIf="allowEmbeds"
            mat-ripple
            type="button"
            [matTooltip]="'Insert/edit embed' | translate"
            [ngClass]="{ active: editor.isActive('iframe') }"
            (click)="setEmbedDialog()"
        >
            <mat-icon>web_asset</mat-icon>
        </button>

        <button type="button" mat-ripple [matTooltip]="'Source code' | translate" (click)="editCode()">
            <mat-icon>code</mat-icon>
        </button>
    </div>

    <div #editorEl class="editor-content"></div>
</div>

<datalist id="text-colors">
    <option *ngFor="let color of textColorSet" [value]="color"></option>
</datalist>

<datalist id="background-colors">
    <option *ngFor="let color of backgroundColorSet" [value]="color"></option>
</datalist>
